(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c,b){var a=0,e=Array.prototype.slice,d=c.cleanData;c.cleanData=function(b){for(var a=0,e;null!=(e=b[a]);a++)try{c(e).triggerHandler("remove")}catch(k){}d(b)};c.widget=function(b,a,e){var d,l,m,n,p={},q=b.split(".")[0];b=b.split(".")[1];d=q+"-"+b;e||(e=a,a=c.Widget);c.expr[":"][d.toLowerCase()]=function(b){return!!c.data(b,d)};c[q]=c[q]||{};l=c[q][b];m=c[q][b]=function(b,a){if(!this._createWidget)return new m(b,
a);arguments.length&&this._createWidget(b,a)};c.extend(m,l,{version:e.version,_proto:c.extend({},e),_childConstructors:[]});n=new a;n.options=c.widget.extend({},n.options);c.each(e,function(b,e){c.isFunction(e)?p[b]=function(){var d=function(){return a.prototype[b].apply(this,arguments)},c=function(e){return a.prototype[b].apply(this,e)};return function(){var b=this._super,a=this._superApply,f;this._super=d;this._superApply=c;f=e.apply(this,arguments);this._super=b;this._superApply=a;return f}}():
p[b]=e});m.prototype=c.widget.extend(n,{widgetEventPrefix:l?n.widgetEventPrefix:b},p,{constructor:m,namespace:q,widgetName:b,widgetFullName:d});l?(c.each(l._childConstructors,function(b,a){var e=a.prototype;c.widget(e.namespace+"."+e.widgetName,m,a._proto)}),delete l._childConstructors):a._childConstructors.push(m);c.widget.bridge(b,m)};c.widget.extend=function(a){for(var d=e.call(arguments,1),h=0,k=d.length,l,m;h<k;h++)for(l in d[h])m=d[h][l],d[h].hasOwnProperty(l)&&m!==b&&(c.isPlainObject(m)?a[l]=
c.isPlainObject(a[l])?c.widget.extend({},a[l],m):c.widget.extend({},m):a[l]=m);return a};c.widget.bridge=function(a,d){var h=d.prototype.widgetFullName||a;c.fn[a]=function(k){var l="string"===typeof k,m=e.call(arguments,1),n=this;k=!l&&m.length?c.widget.extend.apply(null,[k].concat(m)):k;l?this.each(function(){var e,d=c.data(this,h);if(!d)return c.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+k+"'");if(!c.isFunction(d[k])||"_"===k.charAt(0))return c.error("no such method '"+
k+"' for "+a+" widget instance");e=d[k].apply(d,m);if(e!==d&&e!==b)return n=e&&e.jquery?n.pushStack(e.get()):e,!1}):this.each(function(){var b=c.data(this,h);b?b.option(k||{})._init():c.data(this,h,new d(k,this))});return n}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,e){e=c(e||this.defaultElement||this)[0];this.element=c(e);this.uuid=a++;this.eventNamespace=
"."+this.widgetName+this.uuid;this.options=c.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=c();this.hoverable=c();this.focusable=c();e!==this&&(c.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(b){b.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,
_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:c.noop,widget:function(){return this.element},option:function(a,e){var d=a,k,l,m;if(0===arguments.length)return c.widget.extend({},this.options);if("string"===typeof a)if(d={},k=a.split("."),a=k.shift(),k.length){l=d[a]=c.widget.extend({},this.options[a]);for(m=0;m<k.length-1;m++)l[k[m]]=l[k[m]]||{},l=l[k[m]];a=k.pop();if(e===b)return l[a]===b?null:l[a];l[a]=e}else{if(e===b)return this.options[a]===b?null:this.options[a];d[a]=e}this._setOptions(d);return this},_setOptions:function(a){for(var b in a)this._setOption(b,
a[b]);return this},_setOption:function(a,e){this.options[a]=e;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable!==b&&this.hoverable.removeClass("ui-state-hover"),this.focusable!==b&&this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,b,e){var d,l=this;"boolean"!==typeof a&&(e=
b,b=a,a=!1);e?(b=d=c(b),this.bindings=this.bindings.add(b)):(e=b,b=this.element,d=this.widget());c.each(e,function(e,h){function p(){if(a||!0!==l.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"===typeof h?l[h]:h).apply(l,arguments)}"string"!==typeof h&&(p.guid=h.guid=h.guid||p.guid||c.guid++);var q=e.match(/^(\w+)\s*(.*)$/),r=q[1]+l.eventNamespace;(q=q[2])?d.delegate(q,r,p):b.bind(r,p)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;
a.unbind(b).undelegate(b)},_delay:function(a,b){var e=this;return setTimeout(function(){return("string"===typeof a?e[a]:a).apply(e,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){c(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){c(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){c(a.currentTarget).addClass("ui-state-focus")},
focusout:function(a){c(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,b,e){var d,l=this.options[a];e=e||{};b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(d in a)d in b||(b[d]=a[d]);this.element.trigger(b,e);return!(c.isFunction(l)&&!1===l.apply(this.element[0],[b].concat(e))||b.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(a,b){c.Widget.prototype["_"+a]=function(e,
d,l){"string"===typeof d&&(d={effect:d});var m,n=d?!0===d||"number"===typeof d?b:d.effect||b:a;d=d||{};"number"===typeof d&&(d={duration:d});m=!c.isEmptyObject(d);d.complete=l;d.delay&&e.delay(d.delay);if(m&&c.effects&&c.effects.effect[n])e[a](d);else if(n!==a&&e[n])e[n](d.duration,d.easing,l);else e.queue(function(b){c(this)[a]();l&&l.call(e[0]);b()})}})});(function(c){var b=function(a,d,c){var g,h,k=document.createElement("img");if(k.onerror=d,k.onload=function(){!h||c&&c.noRevoke||b.revokeObjectURL(h);d&&d(b.scale(k,c))},b.isInstanceOf("Blob",a)||b.isInstanceOf("File",a))g=h=b.createObjectURL(a),k._type=a.type;else{if("string"!=typeof a)return!1;g=a;c&&c.crossOrigin&&(k.crossOrigin=c.crossOrigin)}return g?(k.src=g,k):b.readFile(a,function(a){var b=a.target;b&&b.result?k.src=b.result:d&&d(a)})},a=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&
URL||window.webkitURL&&webkitURL;b.isInstanceOf=function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"};b.transformCoordinates=function(){};b.getTransformedOptions=function(a){return a};b.renderImageToCanvas=function(a,b,c,g,h,k,l,m,n,p){return a.getContext("2d").drawImage(b,c,g,h,k,l,m,n,p),a};b.hasCanvasOption=function(a){return a.canvas||a.crop};b.scale=function(a,d){d=d||{};var c,g,h,k,l,m,n,p,q,r=document.createElement("canvas"),u=a.getContext||b.hasCanvasOption(d)&&r.getContext,
v=a.naturalWidth||a.width,w=a.naturalHeight||a.height,s=v,t=w,x=function(){var a=Math.max((h||s)/s,(k||t)/t);1<a&&(s=Math.ceil(s*a),t=Math.ceil(t*a))},y=function(){var a=Math.min((c||s)/s,(g||t)/t);1>a&&(s=Math.ceil(s*a),t=Math.ceil(t*a))};return u&&(d=b.getTransformedOptions(d),n=d.left||0,p=d.top||0,d.sourceWidth?(l=d.sourceWidth,void 0!==d.right&&void 0===d.left&&(n=v-l-d.right)):l=v-n-(d.right||0),d.sourceHeight?(m=d.sourceHeight,void 0!==d.bottom&&void 0===d.top&&(p=w-m-d.bottom)):m=w-p-(d.bottom||
0),s=l,t=m),c=d.maxWidth,g=d.maxHeight,h=d.minWidth,k=d.minHeight,u&&c&&g&&d.crop?(s=c,t=g,q=l/m-c/g,0>q?(m=g*l/c,void 0===d.top&&void 0===d.bottom&&(p=(w-m)/2)):0<q&&(l=c*m/g,void 0===d.left&&void 0===d.right&&(n=(v-l)/2))):((d.contain||d.cover)&&(h=c=c||h,k=g=g||k),d.cover?(y(),x()):(x(),y())),u?(r.width=s,r.height=t,b.transformCoordinates(r,d),b.renderImageToCanvas(r,a,n,p,l,m,0,0,s,t)):(a.width=s,a.height=t,a)};b.createObjectURL=function(b){return a?a.createObjectURL(b):!1};b.revokeObjectURL=
function(b){return a?a.revokeObjectURL(b):!1};b.readFile=function(a,b,c){if(window.FileReader){var g=new FileReader;if(g.onload=g.onerror=b,c=c||"readAsDataURL",g[c])return g[c](a),g}return!1};"function"==typeof define&&define.amd?define(function(){return b}):c.loadImage=b})(this);
(function(c){"function"==typeof define&&define.amd?define(["load-image"],c):c(window.loadImage)})(function(c){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var b=c.renderImageToCanvas;c.detectSubsampling=function(a){var b,d;return 1048576<a.width*a.height?(b=document.createElement("canvas"),b.width=b.height=1,d=b.getContext("2d"),d.drawImage(a,-a.width+1,0),0===d.getImageData(0,0,1,1).data[3]):!1};c.detectVerticalSquash=function(a,b){var d,c,g,h,
k,l=a.naturalHeight||a.height;d=document.createElement("canvas");c=d.getContext("2d");b&&(l/=2);d.width=1;d.height=l;c.drawImage(a,0,0);d=c.getImageData(0,0,1,l).data;c=0;for(h=g=l;h>c;)k=d[4*(h-1)+3],0===k?g=h:c=h,h=g+c>>1;return h/l||1};c.renderImageToCanvas=function(a,e,d,f,g,h,k,l,m,n){if("image/jpeg"===e._type){var p,q,r=a.getContext("2d"),u=document.createElement("canvas"),v=u.getContext("2d");if(u.width=1024,u.height=1024,r.save(),p=c.detectSubsampling(e),p&&(d/=2,f/=2,g/=2,h/=2),q=c.detectVerticalSquash(e,
p),p||1!==q){f*=q;m=Math.ceil(1024*m/g);n=Math.ceil(1024*n/h/q);for(q=l=0;h>q;){for(p=k=0;g>p;)v.clearRect(0,0,1024,1024),v.drawImage(e,d,f,g,h,-p,-q,g,h),r.drawImage(u,0,0,1024,1024,k,l,m,n),p+=1024,k+=m;q+=1024;l+=n}return r.restore(),a}}return b(a,e,d,f,g,h,k,l,m,n)}}});
(function(c){"function"==typeof define&&define.amd?define(["load-image"],c):c(window.loadImage)})(function(c){var b=c.hasCanvasOption;c.hasCanvasOption=function(a){return b(a)||a.orientation};c.transformCoordinates=function(a,b){var d=a.getContext("2d"),c=a.width,g=a.height,h=b.orientation;if(h)switch(4<h&&(a.width=g,a.height=c),h){case 2:d.translate(c,0);d.scale(-1,1);break;case 3:d.translate(c,g);d.rotate(Math.PI);break;case 4:d.translate(0,g);d.scale(1,-1);break;case 5:d.rotate(0.5*Math.PI);d.scale(1,
-1);break;case 6:d.rotate(0.5*Math.PI);d.translate(0,-g);break;case 7:d.rotate(0.5*Math.PI);d.translate(c,-g);d.scale(-1,1);break;case 8:d.rotate(-0.5*Math.PI),d.translate(-c,0)}};c.getTransformedOptions=function(a){if(!a.orientation||1===a.orientation)return a;var b,d={};for(b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);switch(a.orientation){case 2:d.left=a.right;d.right=a.left;break;case 3:d.left=a.right;d.top=a.bottom;d.right=a.left;d.bottom=a.top;break;case 4:d.top=a.bottom;d.bottom=a.top;break;case 5:d.left=
a.top;d.top=a.left;d.right=a.bottom;d.bottom=a.right;break;case 6:d.left=a.top;d.top=a.right;d.right=a.bottom;d.bottom=a.left;break;case 7:d.left=a.bottom;d.top=a.right;d.right=a.top;d.bottom=a.left;break;case 8:d.left=a.bottom,d.top=a.left,d.right=a.top,d.bottom=a.right}return 4<a.orientation&&(d.maxWidth=a.maxHeight,d.maxHeight=a.maxWidth,d.minWidth=a.minHeight,d.minHeight=a.minWidth,d.sourceWidth=a.sourceHeight,d.sourceHeight=a.sourceWidth),d}});
(function(c){"function"==typeof define&&define.amd?define(["load-image"],c):c(window.loadImage)})(function(c){c.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice)&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)};c.metaDataParsers={jpeg:{65505:[]}};c.parseMetaData=function(b,a,e){e=e||{};var d=this,f=e.maxMetaDataSize||262144,g={};window.DataView&&(b&&12<=b.size&&"image/jpeg"===b.type&&c.blobSlice)&&c.readFile(c.blobSlice.call(b,
0,f),function(b){var f,l,m,n;b=b.target.result;var p=new DataView(b),q=2,r=p.byteLength-4;m=q;if(65496===p.getUint16(0)){for(;r>q&&(f=p.getUint16(q),65504<=f&&65519>=f||65534===f);){if(l=p.getUint16(q+2)+2,q+l>p.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(m=c.metaDataParsers.jpeg[f])for(n=0;m.length>n;n+=1)m[n].call(d,p,q,l,g,e);m=q+=l}!e.disableImageHead&&6<m&&(g.imageHead=b.slice?b.slice(0,m):(new Uint8Array(b)).subarray(0,m))}else console.log("Invalid JPEG file: Missing JPEG marker.");
a(g)},"readAsArrayBuffer")||a(g)}});
(function(c){"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],c):c(window.loadImage)})(function(c){c.ExifMap=function(){return this};c.ExifMap.prototype.map={Orientation:274};c.ExifMap.prototype.get=function(b){return this[b]||this[this.map[b]]};c.getExifThumbnail=function(b,a,c){var d,f,g;if(!c||a+c>b.byteLength)return console.log("Invalid Exif data: Invalid thumbnail data."),void 0;d=[];for(f=0;c>f;f+=1)g=b.getUint8(a+f),d.push((16>g?"0":"")+g.toString(16));return"data:image/jpeg,%"+
d.join("%")};c.exifTagTypes={1:{getValue:function(b,a){return b.getUint8(a)},size:1},2:{getValue:function(b,a){return String.fromCharCode(b.getUint8(a))},size:1,ascii:!0},3:{getValue:function(b,a,c){return b.getUint16(a,c)},size:2},4:{getValue:function(b,a,c){return b.getUint32(a,c)},size:4},5:{getValue:function(b,a,c){return b.getUint32(a,c)/b.getUint32(a+4,c)},size:8},9:{getValue:function(b,a,c){return b.getInt32(a,c)},size:4},10:{getValue:function(b,a,c){return b.getInt32(a,c)/b.getInt32(a+4,c)},
size:8}};c.exifTagTypes[7]=c.exifTagTypes[1];c.getExifValue=function(b,a,e,d,f,g){var h,k,l;d=c.exifTagTypes[d];if(!d)return console.log("Invalid Exif data: Invalid tag type."),void 0;if(h=d.size*f,k=4<h?a+b.getUint32(e+8,g):e+8,k+h>b.byteLength)return console.log("Invalid Exif data: Invalid data offset."),void 0;if(1===f)return d.getValue(b,k,g);a=[];for(e=0;f>e;e+=1)a[e]=d.getValue(b,k+e*d.size,g);if(d.ascii){b="";for(e=0;a.length>e&&(l=a[e],"\x00"!==l);e+=1)b+=l;return b}return a};c.parseExifTag=
function(b,a,e,d,f){var g=b.getUint16(e,d);f.exif[g]=c.getExifValue(b,a,e,b.getUint16(e+2,d),b.getUint32(e+4,d),d)};c.parseExifTags=function(b,a,c,d,f){var g,h,k;if(c+6>b.byteLength)return console.log("Invalid Exif data: Invalid directory offset."),void 0;if(g=b.getUint16(c,d),h=c+2+12*g,h+4>b.byteLength)return console.log("Invalid Exif data: Invalid directory size."),void 0;for(k=0;g>k;k+=1)this.parseExifTag(b,a,c+2+12*k,d,f);return b.getUint32(h,d)};c.parseExifData=function(b,a,e,d,f){if(!f.disableExif){var g,
h;e=a+10;if(1165519206===b.getUint32(a+4)){if(e+8>b.byteLength)return console.log("Invalid Exif data: Invalid segment size."),void 0;if(0!==b.getUint16(a+8))return console.log("Invalid Exif data: Missing byte alignment offset."),void 0;switch(b.getUint16(e)){case 18761:a=!0;break;case 19789:a=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==b.getUint16(e+2,a))return console.log("Invalid Exif data: Missing TIFF marker."),void 0;g=b.getUint32(e+
4,a);d.exif=new c.ExifMap;(g=c.parseExifTags(b,e,e+g,a,d))&&!f.disableExifThumbnail&&(h={exif:{}},c.parseExifTags(b,e,e+g,a,h),h.exif[513]&&(d.exif.Thumbnail=c.getExifThumbnail(b,e+h.exif[513],h.exif[514])));d.exif[34665]&&!f.disableExifSub&&c.parseExifTags(b,e,e+d.exif[34665],a,d);d.exif[34853]&&!f.disableExifGps&&c.parseExifTags(b,e,e+d.exif[34853],a,d)}}};c.metaDataParsers.jpeg[65505].push(c.parseExifData)});
(function(c){"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],c):c(window.loadImage)})(function(c){var b,a,e;c.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",
296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",
37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",
37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",
41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",
4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",
30:"GPSDifferential",31:"GPSHPositioningError"};c.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",
10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",
15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",
77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",
5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},
Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};c.ExifMap.prototype.getText=function(a){var b=this.get(a);switch(a){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":case "Orientation":return this.stringValues[a][b];
case "ExifVersion":case "FlashpixVersion":return String.fromCharCode(b[0],b[1],b[2],b[3]);case "ComponentsConfiguration":return this.stringValues[a][b[0]]+this.stringValues[a][b[1]]+this.stringValues[a][b[2]]+this.stringValues[a][b[3]];case "GPSVersionID":return b[0]+"."+b[1]+"."+b[2]+"."+b[3]}return b+""};b=c.ExifMap.prototype.tags;a=c.ExifMap.prototype.map;for(e in b)b.hasOwnProperty(e)&&(a[b[e]]=e);c.ExifMap.prototype.getAll=function(){var a,c,e={};for(a in this)this.hasOwnProperty(a)&&(c=b[a],
c&&(e[c]=this.getText(c)));return e}});(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(window.jQuery)})(function(c){var b=0;c.ajaxTransport("iframe",function(a){if(a.async){var e=a.initialIframeSrc||"javascript:false;",d,f,g;return{send:function(h,k){d=c('<form style="display:none;"></form>');d.attr("accept-charset",a.formAcceptCharset);g=/\?/.test(a.url)?"&":"?";"DELETE"===a.type?(a.url=a.url+g+"_method=DELETE",a.type="POST"):"PUT"===a.type?(a.url=a.url+g+"_method=PUT",a.type="POST"):"PATCH"===a.type&&(a.url=
a.url+g+"_method=PATCH",a.type="POST");b+=1;f=c('<iframe src="'+e+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,g=c.isArray(a.paramName)?a.paramName:[a.paramName];f.unbind("load").bind("load",function(){var a;try{if(a=f.contents(),!a.length||!a[0].firstChild)throw Error();}catch(b){a=void 0}k(200,"success",{iframe:a});c('<iframe src="'+e+'"></iframe>').appendTo(d);window.setTimeout(function(){d.remove()},0)});d.prop("target",f.prop("name")).prop("action",a.url).prop("method",
a.type);a.formData&&c.each(a.formData,function(a,b){c('<input type="hidden"/>').prop("name",b.name).val(b.value).appendTo(d)});a.fileInput&&(a.fileInput.length&&"POST"===a.type)&&(b=a.fileInput.clone(),a.fileInput.after(function(a){return b[a]}),a.paramName&&a.fileInput.each(function(b){c(this).prop("name",g[b]||a.paramName)}),d.append(a.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"));d.submit();b&&b.length&&a.fileInput.each(function(a,d){var e=c(b[a]);c(d).prop("name",
e.prop("name"));e.replaceWith(d)})});d.append(f).appendTo(document.body)},abort:function(){f&&f.unbind("load").prop("src",e);d&&d.remove()}}}});c.ajaxSetup({converters:{"iframe text":function(a){return a&&c(a[0].body).text()},"iframe json":function(a){return a&&c.parseJSON(c(a[0].body).text())},"iframe html":function(a){return a&&c(a[0].body).html()},"iframe xml":function(a){return(a=a&&a[0])&&c.isXMLDoc(a)?a:c.parseXML(a.XMLDocument&&a.XMLDocument.xml||c(a.body).html())},"iframe script":function(a){return a&&
c.globalEval(c(a[0].body).text())}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],c):c(window.jQuery)})(function(c){c.support.fileInput=!(RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||c('<input type="file">').prop("disabled"));c.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;
c.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);c.widget("blueimp.fileupload",{options:{dropZone:c(document),pasteZone:c(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,
progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,a){b=this.messages[b]||b.toString();a&&c.each(a,function(a,c){b=b.replace("{"+a+"}",c)});return b},formData:function(b){return b.serializeArray()},add:function(b,a){if(b.isDefaultPrevented())return!1;(a.autoUpload||!1!==a.autoUpload&&c(this).fileupload("option","autoUpload"))&&a.process().done(function(){a.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput",
"dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:c.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=this.loaded=0;this.getBitrate=function(b,a,c){var d=b-this.timestamp;if(!this.bitrate||!c||d>c)this.bitrate=8*(a-this.loaded)*(1E3/d),this.loaded=a,this.timestamp=b;return this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&
(!b.multipart&&c.support.xhrFileUpload||c.support.xhrFormDataFileUpload)},_getFormData:function(b){var a;return"function"===typeof b.formData?b.formData(b.form):c.isArray(b.formData)?b.formData:"object"===c.type(b.formData)?(a=[],c.each(b.formData,function(b,c){a.push({name:b,value:c})}),a):[]},_getTotal:function(b){var a=0;c.each(b,function(b,c){a+=c.size||1});return a},_initProgressObject:function(b){var a={loaded:0,total:0,bitrate:0};b._progress?c.extend(b._progress,a):b._progress=a},_initResponseObject:function(b){var a;
if(b._response)for(a in b._response)b._response.hasOwnProperty(a)&&delete b._response[a];else b._response={}},_onProgress:function(b,a){if(b.lengthComputable){var e=Date.now?Date.now():(new Date).getTime(),d;a._time&&a.progressInterval&&e-a._time<a.progressInterval&&b.loaded!==b.total||(a._time=e,d=Math.floor(b.loaded/b.total*(a.chunkSize||a._progress.total))+(a.uploadedBytes||0),this._progress.loaded+=d-a._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(e,this._progress.loaded,
a.bitrateInterval),a._progress.loaded=a.loaded=d,a._progress.bitrate=a.bitrate=a._bitrateTimer.getBitrate(e,d,a.bitrateInterval),this._trigger("progress",c.Event("progress",{delegatedEvent:b}),a),this._trigger("progressall",c.Event("progressall",{delegatedEvent:b}),this._progress))}},_initProgressListener:function(b){var a=this,e=b.xhr?b.xhr():c.ajaxSettings.xhr();e.upload&&(c(e.upload).bind("progress",function(c){var e=c.originalEvent;c.lengthComputable=e.lengthComputable;c.loaded=e.loaded;c.total=
e.total;a._onProgress(c,b)}),b.xhr=function(){return e})},_isInstanceOf:function(b,a){return Object.prototype.toString.call(a)==="[object "+b+"]"},_initXHRData:function(b){var a=this,e,d=b.files[0],f=b.multipart||!c.support.xhrFileUpload,g=b.paramName[0];b.headers=c.extend({},b.headers);b.contentRange&&(b.headers["Content-Range"]=b.contentRange);f&&!b.blob&&this._isInstanceOf("File",d)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(d.name)+'"');f?c.support.xhrFormDataFileUpload&&
(b.postMessage?(e=this._getFormData(b),b.blob?e.push({name:g,value:b.blob}):c.each(b.files,function(a,c){e.push({name:b.paramName[a]||g,value:c})})):(a._isInstanceOf("FormData",b.formData)?e=b.formData:(e=new FormData,c.each(this._getFormData(b),function(a,b){e.append(b.name,b.value)})),b.blob?e.append(g,b.blob,d.name):c.each(b.files,function(c,d){(a._isInstanceOf("File",d)||a._isInstanceOf("Blob",d))&&e.append(b.paramName[c]||g,d,d.name)})),b.data=e):(b.contentType=d.type,b.data=b.blob||d);b.blob=
null},_initIframeSettings:function(b){var a=c("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||"");b.formData=this._getFormData(b);b.redirect&&(a&&a!==location.host)&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(b){this._isXHRUpload(b)?(this._chunkedUpload(b,!0)||(b.data||this._initXHRData(b),this._initProgressListener(b)),b.postMessage&&(b.dataType="postmessage "+(b.dataType||""))):this._initIframeSettings(b)},_getParamName:function(b){var a=
c(b.fileInput),e=b.paramName;e?c.isArray(e)||(e=[e]):(e=[],a.each(function(){for(var a=c(this),b=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)e.push(b),a-=1}),e.length||(e=[a.prop("name")||"files[]"]));return e},_initFormSettings:function(b){b.form&&b.form.length||(b.form=c(b.fileInput.prop("form")),b.form.length||(b.form=c(this.options.fileInput.prop("form"))));b.paramName=this._getParamName(b);b.url||(b.url=b.form.prop("action")||location.href);b.type=(b.type||"string"===c.type(b.form.prop("method"))&&
b.form.prop("method")||"").toUpperCase();"POST"!==b.type&&("PUT"!==b.type&&"PATCH"!==b.type)&&(b.type="POST");b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){b=c.extend({},this.options,b);this._initFormSettings(b);this._initDataSettings(b);return b},_getDeferredState:function(b){return b.state?b.state():b.isResolved()?"resolved":b.isRejected()?"rejected":"pending"},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;
return b},_getXHRPromise:function(b,a,e){var d=c.Deferred(),f=d.promise();a=a||this.options.context||f;!0===b?d.resolveWith(a,e):!1===b&&d.rejectWith(a,e);f.abort=d.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(b,a){var e=this;a.process=function(b,f){if(b||f)a._processQueue=this._processQueue=(this._processQueue||c.Deferred().resolveWith(e,[this]).promise()).pipe(b,f);return this._processQueue||c.Deferred().resolveWith(e,[this]).promise()};a.submit=function(){"pending"!==
this.state()&&(a.jqXHR=this.jqXHR=!1!==e._trigger("submit",c.Event("submit",{delegatedEvent:b}),this)&&e._onSend(b,this));return this.jqXHR||e._getXHRPromise()};a.abort=function(){return this.jqXHR?this.jqXHR.abort():e._getXHRPromise()};a.state=function(){if(this.jqXHR)return e._getDeferredState(this.jqXHR);if(this._processQueue)return e._getDeferredState(this._processQueue)};a.progress=function(){return this._progress};a.response=function(){return this._response}},_getUploadedBytes:function(b){return(b=
(b=(b=b.getResponseHeader("Range"))&&b.split("-"))&&1<b.length&&parseInt(b[1],10))&&b+1},_chunkedUpload:function(b,a){b.uploadedBytes=b.uploadedBytes||0;var e=this,d=b.files[0],f=d.size,g=b.uploadedBytes,h=b.maxChunkSize||f,k=this._blobSlice,l=c.Deferred(),m=l.promise(),n,p;if(!(this._isXHRUpload(b)&&k&&(g||h<f))||b.data)return!1;if(a)return!0;if(g>=f)return d.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",d.error]);p=function(){var a=c.extend({},b),m=a._progress.loaded;
a.blob=k.call(d,g,g+h,d.type);a.chunkSize=a.blob.size;a.contentRange="bytes "+g+"-"+(g+a.chunkSize-1)+"/"+f;e._initXHRData(a);e._initProgressListener(a);n=(!1!==e._trigger("chunksend",null,a)&&c.ajax(a)||e._getXHRPromise(!1,a.context)).done(function(d,h,k){g=e._getUploadedBytes(k)||g+a.chunkSize;m+a.chunkSize-a._progress.loaded&&e._onProgress(c.Event("progress",{lengthComputable:!0,loaded:g-a.uploadedBytes,total:g-a.uploadedBytes}),a);b.uploadedBytes=a.uploadedBytes=g;a.result=d;a.textStatus=h;a.jqXHR=
k;e._trigger("chunkdone",null,a);e._trigger("chunkalways",null,a);g<f?p():l.resolveWith(a.context,[d,h,k])}).fail(function(b,c,d){a.jqXHR=b;a.textStatus=c;a.errorThrown=d;e._trigger("chunkfail",null,a);e._trigger("chunkalways",null,a);l.rejectWith(a.context,[b,c,d])})};this._enhancePromise(m);m.abort=function(){return n.abort()};p();return m},_beforeSend:function(b,a){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=
0);this._initResponseObject(a);this._initProgressObject(a);a._progress.loaded=a.loaded=a.uploadedBytes||0;a._progress.total=a.total=this._getTotal(a.files)||1;a._progress.bitrate=a.bitrate=0;this._active+=1;this._progress.loaded+=a.loaded;this._progress.total+=a.total},_onDone:function(b,a,e,d){var f=d._progress.total,g=d._response;d._progress.loaded<f&&this._onProgress(c.Event("progress",{lengthComputable:!0,loaded:f,total:f}),d);g.result=d.result=b;g.textStatus=d.textStatus=a;g.jqXHR=d.jqXHR=e;
this._trigger("done",null,d)},_onFail:function(b,a,c,d){var f=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total);f.jqXHR=d.jqXHR=b;f.textStatus=d.textStatus=a;f.errorThrown=d.errorThrown=c;this._trigger("fail",null,d)},_onAlways:function(b,a,c,d){this._trigger("always",null,d)},_onSend:function(b,a){a.submit||this._addConvenienceMethods(b,a);var e=this,d,f,g,h,k=e._getAJAXSettings(a),l=function(){e._sending+=1;k._bitrateTimer=new e._BitrateTimer;
return d=d||((f||!1===e._trigger("send",c.Event("send",{delegatedEvent:b}),k))&&e._getXHRPromise(!1,k.context,f)||e._chunkedUpload(k)||c.ajax(k)).done(function(a,b,c){e._onDone(a,b,c,k)}).fail(function(a,b,c){e._onFail(a,b,c,k)}).always(function(a,b,c){e._onAlways(a,b,c,k);e._sending-=1;e._active-=1;if(k.limitConcurrentUploads&&k.limitConcurrentUploads>e._sending)for(a=e._slots.shift();a;){if("pending"===e._getDeferredState(a)){a.resolve();break}a=e._slots.shift()}0===e._active&&e._trigger("stop")})};
this._beforeSend(b,k);return this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?(g=c.Deferred(),this._slots.push(g),h=g.pipe(l)):h=this._sequence=this._sequence.pipe(l,l),h.abort=function(){f=[void 0,"abort","abort"];return d?d.abort():(g&&g.rejectWith(k.context,f),l())},this._enhancePromise(h)):l()},_onAdd:function(b,a){var e=this,d=!0,f=c.extend({},this.options,a),g=f.limitMultiFileUploads,
h=this._getParamName(f),k,l,m;if((f.singleFileUploads||g)&&this._isXHRUpload(f))if(!f.singleFileUploads&&g)for(l=[],k=[],m=0;m<a.files.length;m+=g)l.push(a.files.slice(m,m+g)),f=h.slice(m,m+g),f.length||(f=h),k.push(f);else k=h;else l=[a.files],k=[h];a.originalFiles=a.files;c.each(l||a.files,function(g,f){var h=c.extend({},a);h.files=l?f:[f];h.paramName=k[g];e._initResponseObject(h);e._initProgressObject(h);e._addConvenienceMethods(b,h);return d=e._trigger("add",c.Event("add",{delegatedEvent:b}),
h)});return d},_replaceFileInput:function(b){var a=b.clone(!0);c("<form></form>").append(a)[0].reset();b.after(a).detach();c.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(c,d){return d===b[0]?a[0]:d});b[0]===this.element[0]&&(this.element=a)},_handleFileTreeEntry:function(b,a){var e=this,d=c.Deferred(),f=function(a){a&&!a.entry&&(a.entry=b);d.resolve([a])},g;a=a||"";b.isFile?b._file?(b._file.relativePath=a,d.resolve(b._file)):b.file(function(b){b.relativePath=
a;d.resolve(b)},f):b.isDirectory?(g=b.createReader(),g.readEntries(function(c){e._handleFileTreeEntries(c,a+b.name+"/").done(function(a){d.resolve(a)}).fail(f)},f)):d.resolve([]);return d.promise()},_handleFileTreeEntries:function(b,a){var e=this;return c.when.apply(c,c.map(b,function(b){return e._handleFileTreeEntry(b,a)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var a=b.items;return a&&a.length&&(a[0].webkitGetAsEntry||a[0].getAsEntry)?
this._handleFileTreeEntries(c.map(a,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):c.Deferred().resolve(c.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=c(b);var a=b.prop("webkitEntries")||b.prop("entries");if(a&&a.length)return this._handleFileTreeEntries(a);a=c.makeArray(b.prop("files"));if(a.length)void 0===a[0].name&&a[0].fileName&&c.each(a,function(a,b){b.name=b.fileName;b.size=b.fileSize});else{b=
b.prop("value");if(!b)return c.Deferred().resolve([]).promise();a=[{name:b.replace(/^.*\\/,"")}]}return c.Deferred().resolve(a).promise()},_getFileInputFiles:function(b){return b instanceof c&&1!==b.length?c.when.apply(c,c.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var a=this,e={fileInput:c(b.target),form:c(b.target.form)};this._getFileInputFiles(e.fileInput).always(function(d){e.files=
d;a.options.replaceFileInput&&a._replaceFileInput(e.fileInput);!1!==a._trigger("change",c.Event("change",{delegatedEvent:b}),e)&&a._onAdd(b,e)})},_onPaste:function(b){var a=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,e={files:[]};a&&a.length&&(c.each(a,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&e.files.push(c)}),!1!==this._trigger("paste",c.Event("paste",{delegatedEvent:b}),e)&&this._onAdd(b,e))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;
var a=this,e=b.dataTransfer,d={};e&&(e.files&&e.files.length)&&(b.preventDefault(),this._getDroppedFiles(e).always(function(e){d.files=e;!1!==a._trigger("drop",c.Event("drop",{delegatedEvent:b}),d)&&a._onAdd(b,d)}))},_onDragOver:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var a=b.dataTransfer;a&&(-1!==c.inArray("Files",a.types)&&!1!==this._trigger("dragover",c.Event("dragover",{delegatedEvent:b})))&&(b.preventDefault(),a.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&
(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));c.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(b,a){var e=-1!==c.inArray(b,this._specialOptions);e&&this._destroyEventHandlers();this._super(b,a);
e&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof c||(b.fileInput=c(b.fileInput));b.dropZone instanceof c||(b.dropZone=c(b.dropZone));b.pasteZone instanceof c||(b.pasteZone=c(b.pasteZone))},_getRegExp:function(b){b=b.split("/");var a=b.pop();b.shift();return RegExp(b.join("/"),a)},_isRegExpOption:function(b,
a){return"url"!==b&&"string"===c.type(a)&&/^\/.*\/[igm]{0,3}$/.test(a)},_initDataAttributes:function(){var b=this,a=this.options;c.each(c(this.element[0].cloneNode(!1)).data(),function(c,d){b._isRegExpOption(c,d)&&(d=b._getRegExp(d));a[c]=d})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},
add:function(b){var a=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(c){b.files=c;a._onAdd(null,b)}):(b.files=c.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var a=this,e=c.Deferred(),d=e.promise(),f,g;d.abort=function(){g=!0;if(f)return f.abort();e.reject(null,"abort","abort");return d};this._getFileInputFiles(b.fileInput).always(function(c){g||(c.length?(b.files=c,f=
a._onSend(null,b).then(function(a,b,c){e.resolve(a,b,c)},function(a,b,c){e.reject(a,b,c)})):e.reject())});return this._enhancePromise(d)}b.files=c.makeArray(b.files);if(b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload"],c):c(window.jQuery)})(function(c){var b=c.blueimp.fileupload.prototype.options.add;c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{processQueue:[],add:function(a,e){var d=c(this);e.process(function(){return d.fileupload("process",e)});b.call(this,a,e)}},processActions:{},_processFile:function(a){var b=this,d=c.Deferred().resolveWith(b,[a]).promise();this._trigger("process",null,a);c.each(a.processQueue,
function(a,c){var h=function(a){return b.processActions[c.action].call(b,a,c)};d=d.pipe(h,c.always&&h)});d.done(function(){b._trigger("processdone",null,a);b._trigger("processalways",null,a)}).fail(function(){b._trigger("processfail",null,a);b._trigger("processalways",null,a)});return d},_transformProcessQueue:function(a){var b=[];c.each(a.processQueue,function(){var d={},f=this.action,g=!0===this.prefix?f:this.prefix;c.each(this,function(b,e){"string"===c.type(e)&&"@"===e.charAt(0)?d[b]=a[e.slice(1)||
(g?g+b.charAt(0).toUpperCase()+b.slice(1):b)]:d[b]=e});b.push(d)});a.processQueue=b},processing:function(){return this._processing},process:function(a){var b=this,d=c.extend({},this.options,a);d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),c.each(a.files,function(a){var g=a?c.extend({},d):d,h=function(){return b._processFile(g)};g.index=a;b._processing+=1;b._processingQueue=b._processingQueue.pipe(h,h).always(function(){b._processing-=
1;0===b._processing&&b._trigger("processstop")})}));return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=c.Deferred().resolveWith(this).promise()}})});(function(c){"function"===typeof define&&define.amd?define("jquery load-image load-image-meta load-image-exif load-image-ios canvas-to-blob ./jquery.fileupload-process".split(" "),c):c(window.jQuery,window.loadImage)})(function(c,b){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",
maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",disabled:"@disableImageResize"},{action:"saveImage",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},
{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:1E7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(a,e){if(e.disabled)return a;var d=this,f=a.files[a.index],
g=c.Deferred();return"number"===c.type(e.maxFileSize)&&f.size>e.maxFileSize||e.fileTypes&&!e.fileTypes.test(f.type)||!b(f,function(b){b.src&&(a.img=b);g.resolveWith(d,[a])},e)?a:g.promise()},resizeImage:function(a,e){if(e.disabled)return a;e=c.extend({canvas:!0},e);var d=this,f=c.Deferred(),g=e.canvas&&a.canvas||a.img,h=function(b){!b||b.width===g.width&&b.height===g.height||(a[b.getContext?"canvas":"img"]=b);a.preview=b;f.resolveWith(d,[a])},k;return a.exif&&(!0===e.orientation&&(e.orientation=a.exif.get("Orientation")),
e.thumbnail&&(k=a.exif.get("Thumbnail")))?(b(k,h,e),f.promise()):g?(h(b.scale(g,e)),f.promise()):a},saveImage:function(a,b){if(!a.canvas||b.disabled)return a;var d=this,f=a.files[a.index],g=f.name,h=c.Deferred(),k=function(b){b.name||(f.type===b.type?b.name=f.name:f.name&&(b.name=f.name.replace(/\..+$/,"."+b.type.substr(6))));a.files[a.index]=b;h.resolveWith(d,[a])};if(a.canvas.mozGetAsFile)k(a.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(f.type)&&g||(g&&g.replace(/\..+$/,"")||"blob")+".png",f.type));
else if(a.canvas.toBlob)a.canvas.toBlob(k,f.type);else return a;return h.promise()},loadImageMetaData:function(a,e){if(e.disabled)return a;var d=this,f=c.Deferred();b.parseMetaData(a.files[a.index],function(b){c.extend(a,b);f.resolveWith(d,[a])},e);return f.promise()},saveImageMetaData:function(a,b){if(!a.imageHead||!a.canvas||!a.canvas.toBlob||b.disabled)return a;var c=a.files[a.index],f=new Blob([a.imageHead,this._blobSlice.call(c,20)],{type:c.type});f.name=c.name;a.files[a.index]=f;return a},setImage:function(a,
b){a.preview&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.preview);return a}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],c):c(window.jQuery)})(function(c){c.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{getNumberOfFiles:c.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",
maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(b,a){if(a.disabled)return b;var e=c.Deferred(),d=this.options,f=b.files[b.index];"number"===c.type(a.maxNumberOfFiles)&&(d.getNumberOfFiles()||0)+b.files.length>a.maxNumberOfFiles?f.error=d.i18n("maxNumberOfFiles"):!a.acceptFileTypes||a.acceptFileTypes.test(f.type)||a.acceptFileTypes.test(f.name)?a.maxFileSize&&f.size>a.maxFileSize?f.error=d.i18n("maxFileSize"):"number"===c.type(f.size)&&f.size<a.minFileSize?
f.error=d.i18n("minFileSize"):delete f.error:f.error=d.i18n("acceptFileTypes");f.error||b.files.error?(b.files.error=!0,e.rejectWith(this,[b])):e.resolveWith(this,[b]);return e.promise()}}})});
